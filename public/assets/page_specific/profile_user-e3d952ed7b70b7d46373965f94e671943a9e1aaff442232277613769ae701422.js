function initiate_plugins(e){$('[data-popup="lightbox"]').fancybox({padding:3}),new Clipboard("a");var o=Array.prototype.slice.call(document.querySelectorAll(".js-switch"));if(o.forEach(function(e){new Switchery(e)}),$(".dropdown-toggle").dropdown(),$('[data-popup="popover"]').popover(),$('[data-popup="tooltip"]').tooltip(),$(".photoset-grid-lightbox").photosetGrid({highresLinks:!0,rel:"withhearts-gallery",gutter:"2px",onComplete:function(){$(".photoset-grid-lightbox").attr("style",""),$(".photoset-grid-lightbox a").colorbox({photo:!0,scalePhotos:!0,maxHeight:"90%",maxWidth:"90%"})}}),$("."+e).each(function(){videojs(this.id,{},function(){})}),$(".open-popup-link").magnificPopup({type:"inline"}),$("#sticker").sticky({topSpacing:0}),$("#sidebar-content").height($(window).height()),$(".pagination").length)return $(window).scroll(function(){var e;if(e=$(".pagination .next_page").attr("href"),e&&$(window).scrollTop()>$(document).height()-$(window).height()-50)return $(".pagination").html('<i class="icon-spinner2 spinner text-blue"></i>'),$.getScript(e)}),$(window).scroll()}function refreshUsercard(e){var o;$("."+e).popover({trigger:"manual",html:!0,animation:!1,template:'<div class="popover"><div class="popover-content"></div><div class="usercard-profile"></div><div class="arrow"></div></div>'}).on("mouseenter",function(){$(".popover").hide(),clearTimeout(o);var e=this,o=setTimeout(function(){$(e).is(":hover")&&(user_uid=$(e).data("id"),usercard_url="/usercard/"+user_uid+"/profile",$.ajax({url:usercard_url}),$(e).popover("show"))},400);$(".popover").on("mouseleave",function(){clearTimeout(o),$(".popover").hide(),$(e).popover("hide")})}).on("mouseleave",function(){var e=this;setTimeout(function(){$(".popover:hover").length||(clearTimeout(o),$(".popover").hide(),$(e).popover("hide"))},300)})}function turn_lights_off(e){$(e).addClass("above-blockui"),$(".outer-space").block({message:null,overlayCSS:{cursor:"default"}})}function turn_lights_on(e){$(".outer-space").unblock(),$(e).removeClass("above-blockui")}function profile_user_plugins(){}function initiate_audio_editor(){$("#audio-title, #audio-composer, #audio-artist, #audio-genre").on("keyup",function(){if($("#audio-title").val().length>0&&$("#audio-composer").val().length>0&&$("#audio-artist").val().length>0&&$("#audio-genre").val().length>0)$("#editor-submition-block").unblock();else{var e=$("#editor-submition-block").data();0==e["blockUI.isBlocked"]&&$("#editor-submition-block").block({message:null,overlayCSS:{backgroundColor:"#fff",opacity:.4,cursor:"not-allowed"}})}}),$("#video-title").on("keyup",function(){if($("#video-title").val().length>0)$("#editor-submition-block").unblock();else{var e=$("#editor-submition-block").data();0==e["blockUI.isBlocked"]&&$("#editor-submition-block").block({message:null,overlayCSS:{backgroundColor:"#fff",opacity:.4,cursor:"not-allowed"}})}});$("#audio-editor-form").validate({ignore:"input[type=hidden], .select2-input",errorClass:"validation-error-label",successClass:"validation-valid-label",highlight:function(e,o){$(e).removeClass(o)},unhighlight:function(e,o){$(e).removeClass(o)},errorPlacement:function(e,o){o.parents("div").hasClass("checker")||o.parents("div").hasClass("choice")||o.parent().hasClass("bootstrap-switch-container")?o.parents("label").hasClass("checkbox-inline")||o.parents("label").hasClass("radio-inline")?e.appendTo(o.parent().parent().parent().parent()):e.appendTo(o.parent().parent().parent().parent().parent()):o.parents("div").hasClass("checkbox")||o.parents("div").hasClass("radio")?e.appendTo(o.parent().parent().parent()):o.parents("div").hasClass("has-feedback")?e.appendTo(o.parent()):o.parents("label").hasClass("checkbox-inline")||o.parents("label").hasClass("radio-inline")?e.appendTo(o.parent().parent()):o.parent().hasClass("uploader")||o.parents().hasClass("input-group")?e.appendTo(o.parent().parent()):e.insertAfter(o)},validClass:"validation-valid-label",rules:{"majorpost[title]":"required","majorpost[composer]":"required","majorpost[artist]":"required","majorpost[genre]":"required"}})}function hide_editor_options(){$("#editor-options-holder").hide(),$("#editor-holder").velocity("scroll",{duration:500,offset:-80,easing:"ease-in-out"})}function initiate_editor(){$(".fa-lightbulb-o").on("click",function(){return(this.tog=!this.tog)?turn_lights_on("#above-blockui"):turn_lights_off("#above-blockui")}),$("#editor-submition-block").block({message:null,overlayCSS:{backgroundColor:"#fff",opacity:.4,cursor:"not-allowed"}}),$('[data-popup="tooltip"]').tooltip()}function initiate_link_editor(){$("form input").on("keypress",function(e){return 13!==e.which}),$("#link-url-input").donetyping(function(){$("#link-form").submit()});$("#link-form").validate({ignore:"input[type=hidden], .select2-input",errorClass:"validation-error-label",successClass:"validation-valid-label",highlight:function(e,o){$(e).removeClass(o)},unhighlight:function(e,o){$(e).removeClass(o)},errorPlacement:function(e,o){o.parents("div").hasClass("checker")||o.parents("div").hasClass("choice")||o.parent().hasClass("bootstrap-switch-container")?o.parents("label").hasClass("checkbox-inline")||o.parents("label").hasClass("radio-inline")?e.appendTo(o.parent().parent().parent().parent()):e.appendTo(o.parent().parent().parent().parent().parent()):o.parents("div").hasClass("checkbox")||o.parents("div").hasClass("radio")?e.appendTo(o.parent().parent().parent()):o.parents("div").hasClass("has-feedback")?e.appendTo(o.parent()):o.parents("label").hasClass("checkbox-inline")||o.parents("label").hasClass("radio-inline")?e.appendTo(o.parent().parent()):o.parent().hasClass("uploader")||o.parents().hasClass("input-group")?e.appendTo(o.parent().parent()):e.insertAfter(o)},validClass:"validation-valid-label",rules:{"link[url]":{url:!0}}})}function initiate_profile_editor(){$(".simple-select").select2({minimumResultsForSearch:1/0}),$(".simple-select-search").select2({}),$(".editor-tags").select2({containerCssClass:"form-detransparent",width:"100%",tags:[]}),$(".control").uniform({radioClass:"choice",wrapperClass:"border-blue text-blue"})}function initiate_profilecover_uploader(){$("#s3_uploader_profilecover").S3Uploader({remove_completed_progress_bar:!1,dropZone:$("#profilecover-dropzone"),progress_bar_target:$("#profilecover-progress-case"),additional_data:{"profilecover[user_uid]":$("#s3_uploader_profilecover").data("user-uid")}},"artwork"),$("#s3_uploader_profilecover").bind("s3_upload_failed",function(e,o){return alert(o.filename+" failed to upload")}),$("#s3_uploader_profilecover").bind("s3_uploads_start",function(){$("#fpc_content").block({message:'<i class="icon-spinner2 spinner text-blue"></i>',overlayCSS:{backgroundColor:"#fff",opacity:.4,cursor:"wait"},css:{border:0,padding:0,backgroundColor:"transparent"}})})}function initiate_profilephoto_uploader(){$("#s3_uploader_profilephoto").S3Uploader({remove_completed_progress_bar:!1,dropZone:$("#profilephoto-dropzone"),progress_bar_target:$("#profilephoto-progress-case"),additional_data:{"profilephoto[user_uid]":$("#s3_uploader_profilephoto").data("user-uid")}},"artwork"),$("#s3_uploader_profilephoto").bind("s3_upload_failed",function(e,o){return alert(o.filename+" failed to upload")}),$("#s3_uploader_profilephoto").bind("s3_uploads_start",function(){$(".caption").hide(),$("#cover-profilephoto-holder,#about-profilephoto-holder").block({message:'<i class="icon-spinner2 spinner text-blue"></i>',overlayCSS:{backgroundColor:"#fff",opacity:.4,cursor:"wait"},css:{border:0,padding:0,backgroundColor:"transparent"}})})}function initiate_soundcloud_editor(){$("form input").on("keypress",function(e){return 13!==e.which}),$("#soundcloud-url-input").donetyping(function(){$("#soundcloud-form").submit()})}function initiate_text_editor(e,o){var t=MediumEditor.extensions.anchor.extend({formSaveLabel:'<span class="ti-check"></span>',formCloseLabel:'<span class="ti-close"></span>',contentDefault:'<i class="fi-link"></i>'}),a=new MediumEditor(".medium-editor-textarea",{disableDoubleReturn:!0,disableExtraSpaces:!0,targetBlank:!0,toolbar:{buttons:[{name:"bold",contentDefault:"B"},{name:"italic",contentDefault:"i"},{name:"anchor",contentDefault:'<i class="fi-link"></i>'},{name:"quote",contentDefault:'<i class="fi-quote"></i>'},{name:"h3",contentDefault:"H"}]},extensions:{anchor:new t},anchor:{linkValidation:!0,placeholderText:"Paste or type a link"},autoLink:!0,imageDragging:!1});o&&a.subscribe("editableInput",function(){if($("#majorpost_content_textarea").val().length>37)$("#editor-submition-block").unblock();else{var e=$("#editor-submition-block").data();0==e["blockUI.isBlocked"]&&$("#editor-submition-block").block({message:null,overlayCSS:{backgroundColor:"#fff",opacity:.4,cursor:"not-allowed"}})}}),$(".medium-editor-textarea").mediumInsert({editor:a,enabled:!0,addons:{images:{label:'<span class="fa fa-camera"></span>',uploadCompleted:function(e,o){var t=o.result.files[0].id;this.deleteScript="/content/artworks/"+t,$("#editor-submition-block").unblock()},deleteMethod:"DELETE",fileDeleteOptions:{},preview:!0,captions:!1,captionPlaceholder:"Type caption for image (optional)",autoGrid:3,fileUploadOptions:{paramName:"artwork[image]",url:e,acceptFileTypes:/(\.|\/)(gif|jpe?g|png)$/i,change:function(e,o){$.each(o.files,function(){$("#editor-submition-block").block({message:null,message:'<i class="icon-spinner2 spinner text-blue"></i>',overlayCSS:{backgroundColor:"#fff",opacity:.4,cursor:"wait"},css:{border:0,padding:0,backgroundColor:"transparent"}})})}},styles:{},actions:{remove:{label:'<span class="ti-close"></span>',clicked:function(){var e=$.Event("keydown");e.which=8,$(document).trigger(e)}}}},embeds:{label:'<span class="fa fa-youtube-play"></span>',placeholder:"Paste a YouTube, Vimeo, Facebook, Twitter or Instagram link and press Enter",captions:!1,captionPlaceholder:"Type caption (optional)",oembedProxy:"http://medium.iframe.ly/api/oembed?iframe=1",styles:{},actions:{remove:{label:'<span class="ti-close"></span>',clicked:function(){var e=$.Event("keydown");e.which=8,$(document).trigger(e)}}}}}}),$(".editor-tags").select2({width:"100%",tags:[]}),$(".select2-drop").addClass("select2-editor-tags")}!function(e){e.fn.extend({donetyping:function(o,t){t=t||1e3;var a,i=function(e){a&&(a=null,o.call(e))};return this.each(function(o,n){var r=e(n);r.is(":input")&&r.on("keyup keypress paste",function(e){"keyup"==e.type&&8!=e.keyCode||(a&&clearTimeout(a),a=setTimeout(function(){i(n)},t))}).on("blur",function(){i(n)})})}})}(jQuery),function(e){e.fn.extend({donetyping:function(o,t){t=t||1e3;var a,i=function(e){a&&(a=null,o.call(e))};return this.each(function(o,n){var r=e(n);r.is(":input")&&r.on("keyup keypress paste",function(e){"keyup"==e.type&&8!=e.keyCode||(a&&clearTimeout(a),a=setTimeout(function(){i(n)},t))}).on("blur",function(){i(n)})})}})}(jQuery);